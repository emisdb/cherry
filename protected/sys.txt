1.Create Scheduled Tours
	Run:		http://cherry/segScheduledTours/weeks/date/18.10.2015
    controller action: http://cherry/segScheduledTours/take?date=18.10.2015&time=09%3A00%3A00
			code:	new SegScheduledTours
		
	Run: http://cherry/segScheduledTours/spontan
    			code:	new SegScheduledTours
                
2. Register on tour
	Run: http://cherry/berlin/book?id=397&cat=1
		code: 	
               $scheduled = SegScheduledTours::model()->findByPk($id);
				$scheduled->tourroute_id = $_POST['Book']['tour'];
				$scheduled->language_id = $_POST['Book']['language'];
				$scheduled->TNmax_sched = $ticket_array->TNmax;
				$scheduled->current_subscribers=$scheduled->current_subscribers +$ticket_count;
				$ticket_array = SegTourroutes::model()->findByPk($_POST['Book']['tour']);
				$user_contact =  new SegContacts;
				$guidestourinvoices = new SegGuidestourinvoices;
				$guidestourinvoicescustomers = new SegGuidestourinvoicescustomers;

3.Current Subscriber (report)
	Run: http://cherry/segGuidestourinvoicescustomers/current/id_sched/391/date/2015-10-20/time/10:00:00
    code:
				$prov = SegGuidestourinvoices::model()->find($criteria_prov);
				$model = SegGuidestourinvoicescustomers::model()->findAll($criteria_invoicecustomer);


Проблемы:
    1.  Выбор города для гида при отображении schedule производится очень опасно 
        - берется первая запись из таблицы seg_guides_cities (нужен какой-то более прочный алгоритм)
    2. Все значения по guide/current и guide/createpdf задаются хардкодом. (коды по типам оплаты, типы финансовых движений и скидкам задаются в коде).
         Надо было бы задавать эти значения в формах.


For production:
1.  choose the view/layout/guide_bs
2   GuideController/book 1130 activate sendmail